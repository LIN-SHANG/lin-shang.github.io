<!-- 
  文件位置: layouts/_partials/hooks/head-end/custom_style.html
  第一段作用: 全局生效 (去除反引号)
  第二段作用: 仅在 type: docs 的页面（课程详情页）强制变宽，不影响首页和列表页
-->

<style>
  :not(pre) > code::before,
  :not(pre) > code::after,
  span.code::before,
  span.code::after {
    content: none !important;
  }
  
  /* 可选：给去掉了引号的代码一点点左右间距，防止粘连文字 */
  :not(pre) > code {
    padding: 0.1rem 0.2rem !important;
  }
</style>


{{ if .Params.python }}
  <!-- 1. COI Service Worker (本地文件) -->
  <!-- <script src="/js/coi-serviceworker.js"></script> -->
  <script src="{{ "js/coi-serviceworker.js" | relURL }}"></script>

  <!-- 2. PyScript (官方源) -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
  <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

  <!-- 3. PrismJS (换用 jsDelivr CDN，更稳定) -->
  <link href="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  
  <!-- 核心库：不加 defer/async，强制阻塞加载，确保后续插件能用到 -->
  <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <!-- Python 插件：依赖核心库 -->
  <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
{{ end }}


{{ if eq .Type "docs" }}
<style>
  /* =========================================
     1. 解锁页面主容器 (Container)
     ========================================= */
  @media (min-width: 1200px) {
    /* 针对大屏幕，让容器占据 95% 的视口宽度 */
    .container, .mx-auto {
      max-width: 95vw !important; 
      padding-left: 2rem !important;
      padding-right: 2rem !important;
    }
  }

  /* =========================================
     2. 解锁文章正文 (Prose)
     ========================================= */
  /* 打破 65ch 限制 */
  .prose {
    max-width: 100% !important;
    min-width: 100% !important;
  }

  /* 让正文居中 */
  .page-body {
    width: 100% !important;
  }

  /* =========================================
     3. 优化代码块和图片
     ========================================= */
  /* 让代码块利用全宽 */
  .prose pre {
    max-width: 100% !important;
    margin: 1.5rem 0 !important;
  }

  /* 图片限制：不让图片无限拉伸，最大 800px 或者 60% */
  /* 这样截图 1 那种超大图的情况即便在 docs 里出现也会稍微收敛一点 */
  .prose img {
    margin-left: auto;
    margin-right: auto;
    max-width: 80% !important; /* 你可以根据喜好调整这个比例 */
    height: auto !important;
  }
</style>
{{ end }}